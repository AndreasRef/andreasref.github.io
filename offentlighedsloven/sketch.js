// Many DOM elements
var dropZone, input, button, sample, clearButton;

// An array to keep track of all the new DOM elements being added
var paragraphs = [];

var inputText = "den 1. januar 2014 får danmark en ny offentlighedslov. et bredt flertal bestående af mere end to tredjedele af mandaterne i folketinget står bag loven, der på en lang række punkter udbygger den hidtidige offentlighedslovs grundlæggende princip om åbenhed og demokratisk kontrol. med den nye lov moderniseres og udvides offentlighedens adgang til aktindsigt – bl.a. i lyset af den øgede brug af it. det skal understreges, at de nye regler om aktindsigt i det politiske maskinrum (lovens § 24 og § 27, nr. 2) ikke er et ”carte blanche” til at kunne nægte aktindsigt. de nye undtagelsesregler herom skal fortolkes og anvendes restriktivt. det har partierne bag loven også fremhævet i den aftale, der blev indgået om loven i efteråret 2012. i den tidligere vejledning til offentlighedsloven var det fremhævet, at loven er en minimumslov, og at der ud fra et princip om meroffentlighed kan gives aktindsigt i videre omfang, end hvad der følger af loven. med den nye offentlighedslovs § 14 er der sket en tydeliggørelse af meroffentlighedsprincippet, ligesom vigtigheden af bestemmelsen er betonet ved folketingets behandling af lovforslaget. myndigheder mv. skal således nøje overveje, om der kan gives aktindsigt ud fra meroffentlighedsprincippet. denne vejledning er først og fremmest ment som et opslagsværk til dem, som skal anvende loven i praksis. vejledningen indeholder en samlet fremstilling af loven, som gennemgås og uddybes i den relevante rækkefølge. vejledningen er baseret på forarbejderne til loven, det vil sige offentlighedskommissionens betænkning (nr. 1510 fra 2009), de relevante lovforslag (l 90 af 8. december 2010 og l 144 af 7. februar 2013) og folketingets behandling heraf. i sagens natur er det ikke muligt at medtage praktiske erfaringer med loven (i form af afgjorte sager), da vejledningen udstedes samtidig med, at loven træder i kraft. men for at illustrere lovens rækkevidde indeholder vejledningen nogle eksempler på betydningen af en række af lovens nye bestemmelser. den nye lov er på mange områder en videreførelse af den hidtidige lov, og f.eks. hidtidig litteratur og praksis fra bl.a. folketingets ombudsmand om loven vil derfor i flere sammenhænge fortsat være relevant i forhold til konstaterede problemstillinger. for at styrke åbenheden om, hvordan loven anvendes i praksis, oprettes hjemmesiden offentlighedsportalen.dk. her vil relevant lovgivning og praksis om aktindsigt løbende blive offentliggjort. den nye offentlighedslov bygger på et omfattende lovforberedende arbejde i den offentlighedskommission, som blev nedsat den 16. maj 2002. offentlighedskommissionen afgav i november 2009 betænkning nr. 1510/2009 om offentlighedsloven. det lovforslag, som ligger til grund for den nye offentlighedslov (l 144), blev fremsat for folketinget den 7. februar 2013 og vedtaget den 4. juni 2013. parallelt med fremsættelsen af l 144 blev der fremsat to lovforslag (l 145 og l 146), som indebar forskellige konsekvensmæssige ændringer i henholdsvis forvaltningsloven og retsplejeloven og i forskellige bestemmelser om aktindsigt i andre love. disse to lovforslag blev vedtaget som lov nr. 638 og 639 af 12. juni 2013, og lovene træder – ligesom den nye offentlighedslov – i kraft den 1. januar 2014. den nye offentlighedslov indebærer på en lang række punkter ændringer af den gældende retstilstand. som væsentlige nye elementer (i forhold til den hidtidige offentlighedslov) kan nævnes følgende: i den nye offentlighedslov er anvendelsesområdet udvidet til at omfatte kl og danske regioner og til som udgangspunkt også at omfatte selskaber, hvor det offentlige ejer mere end 75 pct. af ejerandelene, samt selskaber, institutioner mv., i det omfang de træffer afgørelser på vegne af staten, en region eller en kommune. endvidere ophæves kravet om, at ansøgeren skal have et vist forhåndskendskab til den sag eller det dokument, der anmodes om aktindsigt i, før der kan opnås aktindsigt i sagen (det såkaldte subjektive identifikationskrav). dette krav erstattes med et krav om, at temaet for aktindsigtsanmodningen skal angives af den, som fremsætter anmodningen. i tilknytning hertil er der indført en adgang for en myndighed mv. til at undlade at behandle en anmodning om aktindsigt – selv om det nye identifikationskrav er opfyldt – hvis det vil nødvendiggøre et uforholdsmæssigt ressourceforbrug. denne adgang vil dog kun sjældent kunne anvendes i forhold til aktindsigtsanmodninger fra massemedier eller forskere tilknyttet et anerkendt forskningsinstitut. der er desuden indført en ret til at få foretaget en sammenstilling af oplysninger i en forvaltningsmyndigheds databaser (dataudtræk) og en ret til at få indsigt i den databeskrivelse, der knytter sig til en database. endvidere er der dels lovfæstet en pligt for myndighederne til af egen drift at overveje meroffentlighed, dels indført en udvidelse af meroffentlighedsprincippet til også at omfatte sager undtaget fra aktindsigt.der er også som noget nyt indført regler i offentlighedsloven, der regulerer nærmere angivne forvaltningsmyndigheders pligt til at foretage journalisering, ligesom der etableres et forsøg med en postlisteordning samt en pligt for visse forvaltningsmyndigheder til på deres hjemmeside på internettet løbende at give information om vedkommende myndigheds virksomhed. der er herudover indført en ret til indsigt i bødeforelæg, der er vedtaget af en juridisk person, og i den øverste ledelseskontrakt (direktørkontrakter) for så vidt angår oplysninger om de overordnede prioriteringer for den pågældende myndighed mv.der er tillige indført en ret til indsigt i oplysninger om interne faglige vurderinger i endelig form, som indgår i et fremsat lovforslag mv. denne ret gælder dog ikke i forhold til interne faglige vurderinger i dokumenter, der er udarbejdet til brug for bl.a. ministerrådgivning. der er ud over de nævnte udvidelser af retten til aktindsigt også indført visse begrænsninger heri. således er bl.a. alle sager om førelse af en kalender undtaget fra retten til aktindsigt. det samme gælder interne dokumenter og oplysninger, der udveksles mellem et ministeriums departement og dets underordnede myndigheder eller mellem forskellige ministerier på et tidspunkt, hvor der er konkret grund til at antage, at en minister har eller vil få behov for embedsværkets rådgivning og bistand. sådanne dokumenter vil således også efter udvekslingen være at anse for interne dokumenter. tilsvarende gælder interne dokumenter og oplysninger, der udveksles mellem kl, danske regioner samt disses medlemmer i forbindelse med f.eks. økonomiske eller politiske forhandlinger med staten. endvidere er der indført adgang til at undtage dokumenter, der udarbejdes og udveksles mellem ministre og folketingsmedlemmer i forbindelse med sager om lovgivning eller anden tilsvarende politisk proces. endelig er der sket en række ændringer af offentlighedslovens regler om kompetence, klageadgang og sagsbehandling mv. grundsynspunktet er offentlighedsprincippet i bestemmelsen fremhæves det indledningsvis, at loven har til formål at sikre åbenhed hos myndigheder mv., og hermed bliver lovens grundsynspunkt og offentlighedsprincippet betonet. loven har til formål at understøtte såvel informations- som ytringsfriheden. herved understreges den sammenhæng, der er mellem retten til at modtage ytringer (informationsfrihed) og retten til at ytre sig (ytringsfriheden). det er desuden understreget, at loven har til formål at understøtte borgernes deltagelse i demokratiet, og at loven skal understøtte offentlighedens kontrol med den offentlige forvaltning. loven har også til formål at understøtte mediernes formidling af informationer til offentligheden og at understøtte offentlighedens tillid til den offentlige forvaltning. af lovens grundsynspunkt om åbenhed indebærer ikke, at lovens øvrige bestemmelser alene skal fortolkes ud fra et princip om åbenhed. tvivl om fortolkningen af lovens bestemmelser, herunder undtagelsesbestemmelserne, fører således ikke uden videre til, at der med henvisning til grundsynspunktet skal meddeles aktindsigt. dette betyder, at de hensyn, som undtagelsesbestemmelserne bygger på og som enten direkte eller forudsætningsvis følger af loven også skal tillægges betydning i fortolkningssituationen.  2.3. § 1, stk. 2, fastsætter, at myndigheder mv., der er omfattet af loven, skal sørge for, at det i stk. 1 nævnte hensyn til åbenhed i videst muligt omfang varetages ved valg, etablering og udvikling af nye it-løsninger. herved sigtes der til, at myndighederne ved etableringen og udviklingen af nye digitale værktøjer bør holde sig for øje, at de indrettes på en sådan måde, at de er fremmende for offentlighedsprincippets virkeliggørelse, herunder således, at aktindsigt i givet fald kan meddeles ved e-mail. det indebærer også, at en myndighed ved etablering og udvikling af (nye) databaser bør søge at tage hensyn til, at den enkelte database indrettes på en sådan måde, at det er muligt ved få og enkle kommandoer at få foretaget et dataudtræk i overensstemmelse med § 11, jf. pkt. 4.4 nedenfor. loven omfatter alle danske forvaltningsmyndigheder loven gælder for alle dele af forvaltningsmyndighedernes virksomhed lovens regler om notatpligt og aktindsigt finder anvendelse på en lang række selskaber og institutioner mv. lovens anvendelsesområde kan på visse områder ændres ved bekendtgørelse alle forvaltningsmyndigheder er omfattede den offentlige forvaltning omfatter alle statslige forvaltningsmyndigheder, herunder nævn, råd, udvalg og tværministerielle arbejdsgrupper, samt særlige forvaltningsmyndigheder som nationalbanken og danmarks radio. omfattet er også alle kommunale og regionale myndigheder, herunder kommunale og regionale udvalg, kommunale fællesskaber samt lokale myndigheder med selvstændig kompetence som børn- og ungeudvalg og huslejenævn. bestemmelsen omfatter ikke alle offentlige myndigheder, men alene myndigheder inden for den offentlige forvaltning (forvaltningsmyndigheder). bestemmelsen omfatter således ikke domstolene og gælder dermed hverken for de almindelige domstole (højesteret, landsretterne, byretterne og sø- og handelsretten) eller for de specielle domstole, som f.eks. arbejdsretten, boligretterne og tjenestemandsretten. loven gælder endvidere ikke for folketinget eller organer tilknyttet folketinget, f.eks. folketingets ombudsmand, rigsrevisionen eller statsrevisorerne, ligesom den ikke gælder for udenlandske myndigheder eller internationale organisationer, selv om myndighederne eller organisationerne har f.eks. kontor i danmark. 3.1.2. loven omfatter som udgangspunkt både sager om udstedelse af generelle eller konkrete retsakter (afgørelsessager) og enhver anden form for virksomhed, der udøves af den offentlige forvaltning, herunder såkaldt faktisk forvaltningsvirksomhed, f.eks. rådgivning og vejledning, patientbehandling, undervisning og forskning mv. al forvaltningsvirksomhed er omfattet loven finder dog alene anvendelse på den virksomhed, der udøves af den offentlige forvaltning. loven finder således ikke anvendelse på den virksomhed, som en person, der er ansat eller på anden måde er en del af en forvaltningsmyndighed, udøver, hvis det ikke sker som led i den pågældendes varetagelse af sine opgaver i forvaltningsmyndigheden. dette vil f.eks. være tilfældet, hvis en ansat udarbejder en privat låneansøgning på forvaltningsmyndighedens computer. 3.2.1. efter § 3, stk. 1, finder loven også anvendelse på al virksomhed, der udøves af de selvejende institutioner og foreninger mv., der er nævnt i bestemmelsens nr. 1-3. det er dog kun lovens aktindsigtsregler og reglerne om notatpligt, der gælder for de pågældende institutioner mv. det indebærer, at bl.a. retten til at få foretaget en sammenstilling af oplysninger i de pågældende institutioners databaser (dataudtræk), jf. § 11, samt retten til indsigt i databeskrivelsen, jf. § 12, ikke gælder. visse institutioner mv. er omfattede § 3, stk. 1, nr. 1, omfatter selvejende institutioner, foreninger og fonde mv., der er oprettet ved lov eller i henhold til lov. omfattet af bestemmelsen er bl.a. visse gymnasieskoler, landsbyggefonden, byggeskadefonden, feriefonden, atp og lønmodtagernes dyrtidsfond. de nævnte institutioner mv. vil dog ikke være omfattet af offentlighedsloven, hvis det fremgår af det retsgrundlag, der ligger til grund for oprettelsen, at institutionen ikke skal være en del af den offentlige forvaltning. det kan eksempelvis fremgå af forarbejderne til den lov, hvormed institutionen er oprettet, at institutionen ikke skal henregnes til den offentlige forvaltning. § 3, stk. 1, nr. 2, omfatter selvejende institutioner, foreninger, fonde mv., der er oprettet på privatretligt grundlag, men som henregnes til den offentlige forvaltning, idet 1) de udøver offentlig virksomhed af mere omfattende karakter og 2) er undergivet intensiv offentlig regulering, intensivt offentligt tilsyn og intensiv offentlig kontrol. omfattet af bestemmelsen er bl.a. sociale institutioner med driftsoverenskomst. det er med bestemmelsen forudsat, at den praksis, der har udviklet sig i forbindelse med anvendelsen af den hidtidige offentlighedslov, forvaltningsloven og loven om folketingets ombudsmand med hensyn til, hvornår de pågældende institutioner mv. kan henregnes til den offentlige forvaltning, videreføres. efter § 3, stk. 1, nr. 3, finder lovens regler om aktindsigt og notatpligt også anvendelse på kl og danske regioner."

// An extra element, a checkbox
var spacingCheck;
var modeSelect;

var mouseBool = false;

function setup() {

    noCanvas();

    // Selecting the text field and button
    input = select('#textinput');
    button = select('#submit');
    // What to do when button pressed
    button.mousePressed(handleInput);

    // Selected the div which will be the "drop zone"
    // for dragging and dropping files
    dropZone = select('#drop_zone');
    // Here are the events to handle
    dropZone.dragOver(highlight);
    dropZone.drop(gotFile, unHighlight);

    // This link allows quick testing with a file
    // that's ready to load instantly
    sample = select('#sample');
    sample.mousePressed(loadFile);
    //loadFile();
    handleInput();

    // This button clears the new paragraph elements
    // added
    clearButton = select('#clear');
    clearButton.mousePressed(clearText);

    // Spacing checkbox
    spacingCheck = select('#keepspacing');
    modeSelect = select('#modeSelect');

}

// Load a file for quick testing
function loadFile() {
    loadStrings('files/spam.txt', fileLoaded);
}
// When the file is loaded
function fileLoaded(data) {
    var txt = data.join('\n');
    input.html(txt);
}

// Handle dropzone events
function highlight() {
    dropZone.style('background', '#AAA');
}

function unHighlight() {
    dropZone.style('background','');
}

function gotFile(file) {
    if (file.type === 'text') {
        // process(file.data);
        inputText += file.data + '\n\n';
        input.html(inputText);
    } else {
        // In case it's some weird other kind of file
        alert('this is not a text file.');
    }
}

// Handle the text input field
function handleInput() {
    process(inputText, mouseBool);
}

// Clear all the divs with remove()
function clearText() {
    input.html('');
    for (var i = 0; i < paragraphs.length; i++) {
        paragraphs[i].remove();
    }
    paragraphs = [];
}

function mousePressed() {
    goFullScreen();

}

function goFullScreen() {
    if ((document.fullScreenElement && document.fullScreenElement !== null) ||    
        (!document.mozFullScreen && !document.webkitIsFullScreen)) {
        if (document.documentElement.requestFullScreen) {  
            document.documentElement.requestFullScreen();  
        } else if (document.documentElement.mozRequestFullScreen) {  
            document.documentElement.mozRequestFullScreen();  
        } else if (document.documentElement.webkitRequestFullScreen) {  
            document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);  
        }  
    } 
}

